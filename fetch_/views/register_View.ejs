<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        const idCheck = () => {
            const id = document.querySelector("#id")
            const label = document.querySelector("#label")
            console.log( id.value )
            if(id.value.length < 3) {
                label.innerHTML = "길이... : " + id.value.length
                return;
            }
            fetch("/id_check?id="+id.value)
            .then(res => res.json())
            .then(result => {
                if(result == 0){
                    label.innerHTML = "가입 가능"
                }else{
                    label.innerHTML = "존재 함"
                }   
            })
        }
    </script>
</head>
<body>
    <form id="form" action="/register" method="post">
        <input type="text" name="id" placeholder="id111" id="id" oninput="idCheck()" >
        <label id="label">확인</label><br>
        <input type="password" name="pwd" placeholder="pwd"><br>
        <input type="text" name="name" placeholder="name"><br>
        <input type="text" name="addr" placeholder="addr"><br>
        <input type="submit" value="가입"><br>
    </form>
</body>
</html>